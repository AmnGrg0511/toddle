{"version":3,"sources":["App.js","index.js"],"names":["App","useState","active","setActive","base","setBase","focus","setFocus","title","depth","data","setData","lastRef","useRef","useEffect","current","treeify","tree","console","log","i","length","childs","slice","part","push","datafy","showFile","e","a","reader","FileReader","onload","text","target","result","JSON","parse","readAsText","files","d","p","j","onDragEnd","prev","temp","filter","el","newBase","style","width","margin","borderBottom","display","rows","defaultValue","fontSize","fontWeight","fontFamily","alignItems","color","resizable","map","draggable","onDragStart","opacity","IconButton","onClick","height","backgroundColor","marginLeft","marginRight","ref","value","onChange","lines","split","newData","newNode","onDragOver","transition","Button","variant","flex","element","document","createElement","textFile","Blob","stringify","href","URL","createObjectURL","download","body","appendChild","click","htmlFor","accept","id","multiple","type","component","ReactDOM","render","StrictMode","passedData","getElementById"],"mappings":"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","file":"static/js/main.43ca7f93.chunk.js","sourcesContent":["import { Button, IconButton } from \"@mui/material\";\nimport { useState, useRef, useEffect } from \"react\";\nimport {\n  RiDragMove2Fill,\n  RiArrowRightLine,\n  RiArrowLeftLine,\n  RiDeleteBinLine,\n} from \"react-icons/ri\";\nimport {\n  MdOutlineFileUpload,\n  MdOutlineFileDownload,\n  MdOutlineAdd,\n} from \"react-icons/md\";\n\nfunction App() {\n  const [active, setActive] = useState(-1);\n  const [base, setBase] = useState(-1);\n  const [focus, setFocus] = useState(0);\n  const [data, setData] = useState([{ title: \"\", depth: 0 }]);\n  const lastRef = useRef(null);\n\n  useEffect(() => {\n    if (lastRef.current) lastRef.current.focus();\n  }, [focus]);\n\n  const treeify = (data, depth = 0) => {\n    const tree = [];\n    console.log({ data, tree, depth });\n    for (let i = 0; i < data.length; i++) {\n      if (data[i].depth === depth) {\n        data[i].childs = treeify(data.slice(i, part(data, i)), depth + 1);\n        tree.push(data[i]);\n      }\n    }\n    return tree;\n  };\n\n  const datafy = (tree) => {\n    const data = [];\n    console.log({ data, tree });\n    for (let i = 0; i < tree.length; i++) {\n      data.push({ title: tree[i].title, depth: tree[i].depth });\n      data.push(...datafy(tree[i].childs));\n    }\n    return data;\n  };\n\n  const showFile = async (e) => {\n    const reader = new FileReader();\n    reader.onload = async (e) => {\n      const text = e.target.result;\n      setData(datafy(JSON.parse(text)));\n    };\n    reader.readAsText(e.target.files[0]);\n  };\n\n  const part = (d, i) => {\n    if (i < 0) return;\n    let p = i + 1,\n      depth = d[i].depth;\n    for (let j = i + 1; j < d.length; j++) {\n      if (d[j].depth <= depth) break;\n      p = j + 1;\n    }\n    return p;\n  };\n\n  return (\n    <div\n      onDragEnd={() => {\n        if (active !== -1 && base !== -1)\n          setData((prev) => {\n            const p = part(data, active);\n            const temp = prev.slice(active, p);\n            prev = prev.filter((el, j) => j < active || j >= p);\n            let newBase = active <= base ? base + 1 - p + active : base + 1;\n            return [...prev.slice(0, newBase), ...temp, ...prev.slice(newBase)];\n          });\n        setBase(-1);\n        setActive(-1);\n      }}\n      style={{\n        width: \"80%\",\n        margin: \"50px auto\",\n      }}\n    >\n      <div\n        style={{\n          borderBottom: \"4px solid #eee\",\n          display: \"flex\",\n        }}\n      >\n        <textarea\n          rows=\"1\"\n          defaultValue={\"Mathematics\"}\n          style={{\n            fontSize: 30,\n            fontWeight: \"bold\",\n            fontFamily: \"Monospace\",\n            alignItems: \"center\",\n            color: \"#ccc\",\n            resizable: \"none\",\n          }}\n        />\n      </div>\n      {data.map(({ title, depth }, i) => (\n        <div>\n          <div\n            draggable\n            onDragStart={() => {\n              setActive(i);\n            }}\n            key={i}\n            style={{\n              display: \"flex\",\n              opacity: i >= active && i < part(data, active) ? 0.2 : 1,\n              alignItems: \"center\",\n            }}\n          >\n            <div>\n              <IconButton onClick={() => {}}>\n                <RiDragMove2Fill />\n              </IconButton>\n              <IconButton\n                onClick={() => {\n                  if (i !== 0 && depth > 0) {\n                    setData((prev) =>\n                      prev.map((e, j) =>\n                        j >= i && j < part(prev, i)\n                          ? { ...e, depth: e.depth - 1 }\n                          : e\n                      )\n                    );\n                  }\n                }}\n              >\n                <RiArrowLeftLine />\n              </IconButton>\n              <IconButton\n                onClick={() => {\n                  if (i !== 0 && depth <= data[i - 1].depth) {\n                    setData((prev) =>\n                      prev.map((el, j) =>\n                        i === j ? { ...el, depth: el.depth + 1 } : el\n                      )\n                    );\n                  }\n                }}\n              >\n                <RiArrowRightLine />\n              </IconButton>\n              <IconButton\n                onClick={() =>\n                  setData((prev) =>\n                    prev.filter((e, j) => j < i || j >= part(prev, i))\n                  )\n                }\n              >\n                <RiDeleteBinLine />\n              </IconButton>\n            </div>\n            <div\n              style={{\n                height: 56,\n                width: 40,\n                backgroundColor: \"#fafafa\",\n                marginLeft: 15 + depth * 24,\n                marginRight: 15,\n              }}\n            />\n            <textarea\n              rows=\"1\"\n              ref={i === focus ? lastRef : null}\n              value={title}\n              style={{\n                opacity: 1 - depth * 0.1,\n                fontSize: 26 - depth * 2.5,\n              }}\n              onChange={({ target: { value } }) => {\n                const lines = value.split(\"\\n\");\n                value = lines[0];\n                let newData = data.map((el, j) =>\n                  i === j ? { ...el, title: value } : el\n                );\n                if (lines.length > 1) {\n                  const newNode = { title: lines[1], depth: data[i].depth };\n                  newData = [\n                    ...newData.slice(0, i + 1),\n                    newNode,\n                    ...newData.slice(i + 1),\n                  ];\n                  setFocus(i + 1);\n                }\n                setData(newData);\n              }}\n            />\n          </div>\n          <div\n            onDragOver={() => {\n              if (\n                data[active].depth - 1 <= depth &&\n                (!data[i + 1] || data[i + 1].depth <= data[active].depth)\n              )\n                setBase(i);\n            }}\n            style={{\n              width: \"100%\",\n              height: base === i ? 40 : 4,\n              backgroundColor: base === i ? \"#bde0f5\" : \"#eee\",\n              transition: \"all ease .2s\",\n            }}\n          />\n        </div>\n      ))}\n      <div style={{ display: \"flex\" }}>\n        <Button\n          variant=\"contained\"\n          style={{ flex: 1, margin: 5 }}\n          onClick={() => {\n            setData((prev) => [\n              ...prev,\n              { title: \"\", depth: prev[prev.length - 1]?.depth ?? 0 },\n            ]);\n          }}\n        >\n          <MdOutlineAdd style={{ width: 40, height: 20 }} />\n          Add\n        </Button>\n      </div>\n      <div style={{ display: \"flex\" }}>\n        <Button\n          style={{ flex: 1, margin: 5 }}\n          variant=\"outlined\"\n          onClick={() => {\n            const element = document.createElement(\"a\");\n            const textFile = new Blob([[JSON.stringify(treeify(data))]]);\n            element.href = URL.createObjectURL(textFile);\n            element.download = \"userFile.json\";\n            document.body.appendChild(element);\n            element.click();\n          }}\n        >\n          <MdOutlineFileDownload style={{ width: 40, height: 20 }} />\n          Save\n        </Button>\n        <label style={{ flex: 1, margin: 5 }} htmlFor=\"button-file\">\n          <input\n            style={{ display: \"none\" }}\n            accept=\"application/JSON\"\n            onChange={showFile}\n            id=\"button-file\"\n            multiple\n            type=\"file\"\n          />\n          <Button variant=\"outlined\" component=\"span\" style={{ width: \"100%\" }}>\n            <MdOutlineFileUpload style={{ width: 40, height: 20 }} />\n            Load\n          </Button>\n        </label>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App passedData={[{ title: \"\" }]} />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}